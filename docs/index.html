<!-- LTeX: enabled=false -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/buefy/dist/buefy.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@mdi/font@5.8.55/css/materialdesignicons.min.css"
    />
    <title>Raumplan DHBW Mannheim</title>
    <link rel="shortcut icon" type="image/png" href="favicon.ico" />
    <style>
      /*Set background image*/
      body,
      html {
        height: 100%;
        width: 100%;
        background-image: url("background_dark.jpg");
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        overflow: hidden;
      }

      /*Disable transparent modal background*/
      .modal-background {
        position: unset;
      }

      /*Disable unwanted scrolling*/
      .media-content {
        overflow-y: hidden !important;
      }

      /*Make message box smaller*/
      #eventsId .message-body {
        padding-top: 5px !important;
        padding-bottom: 5px !important;
      }

      /*Make space between message boxes smaller*/
      #eventsId {
        margin-bottom: 10px !important;
      }
      /*Make navbar transparent*/
      nav.navbar.is-fixed-top {
        background: transparent;
      }
    </style>
  </head>

  <body>
    <div id="app">
      <b-navbar
        :fixed-top="true"
        :transparent="true"
        type="is-dark"
        :mobile-burger="false"
        centered
      >
        <template #brand>
          <b-navbar-item tag="router-link" :to="{ path: '/' }">
            <img
              src="dhbw_light.png"
              alt="DHBW-Mannheim"
              v-if="isDarkMode"
            />
            <img
              src="dhbw_dark.png"
              alt="DHBW-Mannheim"
              v-if="!isDarkMode"
            />
          </b-navbar-item>
        </template>
      </b-navbar>
      <b-modal active has-modal-card can-cancel="false">
        <div class="modal-card" style="padding: 1cm">
          <!--Room picker-->
          <b-field
            label="Raum auswählen"
            v-bind:custom-class="{ 'has-text-white': isDarkMode }"
            style="margin-bottom: 1cm"
          >
            <b-autocomplete
              rounded
              v-model="roomSelector"
              :data="filteredRoomArray"
              placeholder="z.B. Raum 048B"
              icon="magnify"
              clearable
              @select="onRoomChanged($event)"
            >
              <template #empty>Keine Ergebnisse gefunden</template>
            </b-autocomplete>
          </b-field>
          <!--Date picker-->
          <b-field
            label="Tag auswählen"
            v-bind:custom-class="{ 'has-text-white': isDarkMode }"
            style="margin-bottom: 1cm"
          >
            <b-datepicker
              :mobile-native="false"
              v-model="date"
              placeholder="Bitte ein Datum eingeben oder auswählen..."
              :min-date="minDate"
              :max-date="maxDate"
              :events="datePickerRoomEvents"
              indicators="bars"
              icon="calendar-today"
              locale="de-DE"
              @input="onDateChanged()"
              append-to-body
            >
            </b-datepicker>
            <b-checkbox
              v-bind:class="{ 'has-text-white': isDarkMode }"
              v-model="manualTime"
              style="margin-left: 20px"
            >
              Manuelle Zeiteingabe
            </b-checkbox>
          </b-field>
          <b-field
            v-if="manualTime"
            label="Zeit wählen"
            v-bind:custom-class="{ 'has-text-white': isDarkMode }"
            style="margin-bottom: 1cm"
          >
            <b-clockpicker
              rounded
              v-model="time"
              placeholder="Bitte Zeit auswählen..."
              icon="clock"
              hour-format="24"
              @input="onTimeChanged()"
            >
            </b-clockpicker>
          </b-field>
          <!--Results display-->
          <b-message
            :closable="false"
            :title="messageTitle"
            has-icon
            type="is-primary"
            style="margin-bottom: 1cm; overflow-y: auto"
          >
            <b-message
              type="is-primary"
              v-for="item in results"
              id="eventsId"
            >
              {{item}}
            </b-message>
            <b-taglist attached style="margin-top: 25px !important">
              <b-tag type="is-dark"
                ><a
                  href="https://github.com/antonplagemann/dhbw-room-plan"
                  >Zuletzt aktualisiert:</a
                ></b-tag
              >
              <b-tag
                type="is-primary"
                @dblclick.native="changeDisplayMode()"
                >{{lastUpdated}}</b-tag
              >
            </b-taglist>
          </b-message>
        </div>
      </b-modal>
    </div>

    <script src="https://unpkg.com/vue@2.6.14/dist/vue.min.js"></script>
    <script src="https://unpkg.com/buefy/dist/buefy.min.js"></script>
    <script src="./main.js"></script>
  </body>
</html>
